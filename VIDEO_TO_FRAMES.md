# Автоматическое извлечение кадров из видео

## Быстрая инструкция

### 1. Создайте папку для видео

Создайте папку `videos/` в корне проекта (если её еще нет).

### 2. Поместите видео в папку

Поместите все ваши видео файлы в папку `videos/`:

```
hahaton123/
├── videos/              ← Создайте эту папку
│   ├── video1.mp4      ← Поместите сюда ваши видео
│   ├── video2.avi
│   └── video3.mov
├── data/
├── ...
```

**Поддерживаемые форматы:**
- `.mp4`
- `.avi`
- `.mov`
- `.mkv`
- `.flv`
- `.wmv`
- `.m4v`

### 3. Запустите скрипт

```bash
python auto_extract_frames.py
```

Скрипт автоматически:
- ✅ Найдет все видео в папке `videos/`
- ✅ Извлечет кадры из каждого видео
- ✅ Сохранит кадры в `data/images/train/`
- ✅ Покажет статистику

### 4. Результат

После выполнения скрипта кадры будут в папке:
```
data/images/train/
├── video1_frame_000000.jpg
├── video1_frame_000001.jpg
├── video2_frame_000000.jpg
└── ...
```

## Настройка параметров

### Изменить шаг извлечения

По умолчанию извлекается каждый 30-й кадр (чтобы не было слишком много похожих кадров).

Чтобы изменить шаг:

```bash
python auto_extract_frames.py videos 10
```

Где `10` - это шаг (каждый 10-й кадр).

**Рекомендации:**
- `step=10` - много кадров, больше похожих изображений
- `step=30` - оптимально (по умолчанию)
- `step=60` - меньше кадров, больше разнообразия

### Изменить папку с видео

```bash
python auto_extract_frames.py my_videos
```

Где `my_videos` - ваша папка с видео.

## Что делать дальше?

После извлечения кадров:

1. **Разметьте кадры:**
   - Используйте LabelImg: `pip install labelImg` → `labelImg`
   - Или другой инструмент (Roboflow, CVAT)
   - Сохраняйте разметку в формате **YOLO**
   - Разметку сохраняйте в `data/labels/train/`

2. **Запустите обучение:**
   ```bash
   python run_training.py
   ```

## Пример использования

```bash
# 1. Создайте папку videos (если нет)
mkdir videos

# 2. Поместите видео в папку videos/
# (скопируйте ваши видео файлы)

# 3. Запустите извлечение кадров
python auto_extract_frames.py

# Результат:
# ============================================================
# АВТОМАТИЧЕСКОЕ ИЗВЛЕЧЕНИЕ КАДРОВ ИЗ ВИДЕО
# ============================================================
# Папка с видео: videos/
# Папка для кадров: data/images/train/
# Шаг извлечения: каждый 30-й кадр
# Найдено видео файлов: 3
# ============================================================
#
# [1/3] video1.mp4
#   Обработка: video1.mp4
#   ✓ Сохранено кадров: 120 (из 3600 всего)
#
# [2/3] video2.avi
#   Обработка: video2.avi
#   ✓ Сохранено кадров: 85 (из 2550 всего)
#
# ============================================================
# ✅ ИЗВЛЕЧЕНИЕ ЗАВЕРШЕНО!
# ============================================================
# Всего обработано видео: 3
# Всего сохранено кадров: 350
# Кадры сохранены в: data/images/train/
```

## Структура после извлечения

```
hahaton123/
├── videos/                    # Ваши исходные видео
│   ├── video1.mp4
│   └── video2.avi
├── data/
│   ├── images/
│   │   └── train/            # ← Кадры извлечены сюда
│   │       ├── video1_frame_000000.jpg
│   │       ├── video1_frame_000001.jpg
│   │       ├── video2_frame_000000.jpg
│   │       └── ...
│   └── labels/
│       └── train/            # ← Сюда сохраняйте разметку
│           ├── video1_frame_000000.txt
│           ├── video1_frame_000001.txt
│           └── ...
```

## Важно!

- **Имена файлов:** Кадры будут названы как `{имя_видео}_frame_{номер}.jpg`
- **Разметка:** Файлы разметки должны иметь те же имена, но с расширением `.txt`
- **Пример:** 
  - Кадр: `video1_frame_000000.jpg`
  - Разметка: `video1_frame_000000.txt`

## Проблемы?

**Ошибка: "папка 'videos' не найдена"**
- Создайте папку `videos/` в корне проекта
- Поместите туда видео файлы

**Ошибка: "не найдено видео файлов"**
- Проверьте формат файлов (должны быть .mp4, .avi, .mov и т.д.)
- Убедитесь, что файлы находятся в папке `videos/`

**Слишком много/мало кадров**
- Измените шаг извлечения (параметр `step`)
- Меньше шаг = больше кадров
- Больше шаг = меньше кадров

